(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{219:function(e,t,a){},283:function(e,t,a){},355:function(e,t,a){e.exports=a(720)},360:function(e,t,a){},386:function(e,t,a){},391:function(e,t,a){},711:function(e,t,a){},719:function(e,t,a){},720:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(65),s=a.n(o),i=(a(360),a(21)),c=a(22),l=a(24),u=a(23),m=a(25),d=a(54),p=a(76),h=a(46),g=a(286),f=a(47),b=a(287),E=a(207),v=a(288),w=a.n(v),y=a(289),C=a(290),k=a.n(C),S={isAuthenticated:!1,user:{}},O={},j={},x=Object(f.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_USER"===t.type?Object(y.a)({},e,{isAuthenticated:!k()(t.payload),user:t.payload}):e},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return"AUTH_ERRORS"===t.type?t.payload:e},editPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;return"EDIT_POST"===t.type?t.payload:e}}),T=[b.a],R={key:"root",storage:w.a},A=Object(E.a)(R,x),N=Object(f.e)(A,{},Object(f.d)(f.a.apply(void 0,T))),I=Object(E.b)(N),D=a(145),z=a.n(D),M=a(28),F=a.n(M),P=function(e){e?F.a.defaults.headers.common.Authorization=e:delete F.a.defaults.headers.common.Authorization},U=(a(386),a(112)),L=a(291),_=a(292),K=a(157),W=(a(219),a(740)),B=a(91),G=a(737),V=a(58),H=(a(391),a(16)),q=a.n(H),Y=a(19),J=function(e){return{type:"SET_CURRENT_USER",payload:e}},Q=function(){return function(e){localStorage.removeItem("jwtToken"),P(!1),e(J({})),e({type:"AUTH_ERRORS",payload:{}})}},Z=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/users/avatarimagedata",t).then(function(e){return e}).catch(function(e){return console.log(e)}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),X=a(31),$=a(729),ee=a(116),te={loader:{display:"inline-block",width:"35px",height:"35px"},avatarWrapper:{display:"inline-block",width:"35px",height:"35px"},avatarCrop:{overflow:"hidden",height:"100%",borderRadius:"3px"},avatarImg:{display:"inline-block",width:"35px",top:"-100%",right:"-100%",bottom:"-100%",left:"-100%"},label:{minWidth:"70px",maxWidth:"120px",height:"35px",borderRadius:"0%",margin:"0",paddingTop:"0",paddingBottom:"0",borderTopRightRadius:"3px",borderBottomRightRadius:"3px",background:"transparent"},labelText:{fontSize:"1.25em",paddingTop:"10px"}},ae=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onLoad=function(){e.setState({loaded:!0})},e.state={color:[180,180,180],loaded:!1},e.onLoad=e.onLoad.bind(Object(X.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.userAvatar||"https://firebasestorage.googleapis.com/v0/b/fangnx-rview.appspot.com/o/defaultUnisexAvatar.svg?alt=media&token=7c1142e6-4698-4d20-874e-385a652da894";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:te.avatarWrapper},r.a.createElement("div",{style:te.avatarCrop},r.a.createElement($.a,{inline:!0,active:!0,size:"medium",style:this.state.loaded?{display:"none"}:te.loader}),r.a.createElement("img",{src:e,alt:"avatar",onLoad:this.onLoad,style:this.state.loaded?te.avatarImg:{display:"none"}}))),r.a.createElement(ee.a,{style:te.label},r.a.createElement("div",{style:te.labelText},this.props.userName)))}}]),t}(r.a.Component),ne={dropdownMenu:{marginRight:"20px",marginTop:"25px",background:"rgba(245, 245, 245, 0.9)"}},re=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onLogout=function(t){t.preventDefault(),e.props.logoutUser()},e.state={isLoggedIn:!1,userName:"",userAvatar:""},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){N.getState().auth.isAuthenticated&&this.setState({isLoggedIn:!0})}},{key:"componentWillReceiveProps",value:function(e){console.log(e.auth),e.auth.isAuthenticated?this.setState({isLoggedIn:!0}):this.setState({isLoggedIn:!1}),console.log(this.state)}},{key:"render",value:function(){var e=this.state.isLoggedIn;return r.a.createElement(d.a,null,r.a.createElement(W.a,{inverted:!0,borderless:!0,className:"header-menu"},r.a.createElement(W.a.Menu,null,r.a.createElement(W.a.Item,{as:d.b,to:"/forum",name:"main"},r.a.createElement(V.a,{icon:["fas","water"],size:"2x"})),r.a.createElement(W.a.Item,{as:d.b,to:"/",exact:!0,name:"addPost"},"ALL POSTS"),r.a.createElement(W.a.Item,{as:d.b,to:"/myposts",name:"addPost"},"MY POSTS"),r.a.createElement(W.a.Item,{as:d.b,to:"/post/add",name:"addPost"},"NEW POST")),r.a.createElement(W.a.Menu,{position:"right",className:"header-menu-rightmenu"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a.Item,null,r.a.createElement(ae,{userName:this.props.auth.user.name,userAvatar:this.props.auth.user.avatar}),r.a.createElement(B.a,{as:G.a,name:"dropdown",style:{background:"none"}},r.a.createElement(G.a.Menu,{direction:"left",style:ne.dropdownMenu},r.a.createElement(G.a.Item,null,"View User Info"),r.a.createElement(G.a.Item,{onClick:this.onLogout},"Log Out"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a.Item,{as:d.b,to:"/registration",name:"register",color:"teal"},"REGISTER"),r.a.createElement(W.a.Item,{as:d.b,to:"/login",name:"login",color:"teal"},"LOG IN")))))}}]),t}(r.a.Component),oe=Object(h.b)(function(e){return{auth:e.auth}},{logoutUser:Q})(re),se=a(200),ie=a(85),ce=a(206),le={fadeIn:{animation:"1 1s",animationName:ie.a.keyframes(ce.fadeIn)},postViewAnimated:{animation:"1 1s",animationName:ie.a.keyframes(ce.headShake)},postBoardSeparator:{visibility:"hidden",height:"30px"}},ue=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/add",t).then(function(e){return e}).catch(function(e){return console.log("Add Post Error: ".concat(e))}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/delete",t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/edit",t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(Y.a)(q.a.mark(function e(){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/findAll").then(function(e){return e}).catch(function(e){return console.log("Get all Posts Error: ".concat(e))}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/userposts",t).then(function(e){return e}).catch(function(e){return console.log("Get all Posts of User Error: ".concat(e))}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/addComment",t).then(function(e){return e}).catch(function(e){return console.log("Add Comment Error: ".concat(e))}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.a.post("http://localhost:5000/api/posts/postcomments",t).then(function(e){return e}).catch(function(e){return console.log("Get all Comments of Post Error: ".concat(e))}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),be=a(44),Ee=a(100),ve=a.n(Ee),we=a(738),ye=a(741),Ce=a(742),ke=a(730),Se=a(722),Oe=a(731),je=a(732),xe=a(735),Te={wrapper:{width:"60%",minWidth:"500px",margin:"0 auto"},card:{background:"rgba(240, 240, 240, 96%)",borderRadius:"3px"},cardContent:{width:"100%",margin:"0 auto"},field:{marginTop:"5px",width:"100%",boxShadow:"none"},top:{paddingTop:"0px"},column:{paddingLeft:"0",paddingRight:"0"},title:{fontFamily:"Cairo",fontSize:"2.5em"},titleTight:{fontFamily:"Cairo",fontSize:"1.5em",paddingTop:"0px"},content:{minHeight:"200px",fontSize:"1em",border:"none",background:"rgba(228, 228, 228, 1)"},iconGroup:{background:"transparent",padding:"none",float:"right"},icon:{margin:"0"},commentsRow:{padding:"0px"},commentInput:{width:"100%",background:"rgba(236, 236, 236, 1)",border:"1px solid #ddd",boxShadow:"none",borderRadius:"3px",marginTop:"30px",marginBottom:"15px",padding:"0px"},commentSubmitButton:{background:"transparent"},divider:{background:"rgba(228, 228, 228, 0.2)",marginLeft:"0px",marginRight:"0px",padding:"0"}},Re=a(101),Ae=a.n(Re),Ne=a(736),Ie={commentFeed:{width:"100%",margin:"0.5em 0"},commentContent:{background:"rgba(230, 230, 230, 0.8)",marginTop:"0px"},avatarWrapper:{display:"inline-block",width:"35px",height:"35px"},avatarCrop:{overflow:"hidden",height:"100%",borderRadius:"3px"},avatarImg:{display:"inline-block",width:"35px",top:"-100%",right:"-100%",bottom:"-100%",left:"-100%",borderRadius:"0"}},De=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Ne.a,{style:Ie.commentFeed},r.a.createElement(Ne.a.Event,null,r.a.createElement(Ne.a.Label,null,r.a.createElement("div",{style:Ie.avatarWrapper},r.a.createElement("div",{style:Ie.avatarCrop},r.a.createElement("img",{src:this.props.authorAvatar,alt:"",style:Ie.avatarImg})))),r.a.createElement(Ne.a.Content,{style:Ie.commentContent},r.a.createElement(Ne.a.Summary,null,this.props.author),r.a.createElement(Ne.a.Extra,{text:!0},this.props.content))))}}]),t}(r.a.Component),ze=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.comments;return r.a.createElement(r.a.Fragment,null,e.map(function(e,t){return r.a.createElement(De,{key:"commentView-"+t,content:e.content,pid:e.pid,author:e.author,authorEmail:e.authorEmail,authorAvatar:e.authorAvatar,timeStamp:e.timeStamp})}))}}]),t}(r.a.Component),Me=a(102),Fe=function(e){return Object.assign.apply(Object,[{}].concat(Object(Me.a)(e)))},Pe=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ue=["orange","yellow","olive","green","teal","blue","purple","brown","grey"],Le=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this)))._isMounted=!1,e.toggleShowFullCard=function(){e.setState(function(e){return{showFullCard:!e.showFullCard}})},e.deleteModalClose=function(t){e.setState({deleteModalOpened:!1}),t&&me({pid:e.props.pid}).then()},e.onChange=function(t,a){e.setState(Object(be.a)({},a.id,a.value))},e.onDeleteClicked=function(t){t.preventDefault(),e.setState({deleteModalOpened:!0})},e.onAddComment=function(t){t.preventDefault();var a={content:e.state.newCommentContent,pid:e.props.pid,author:e.props.auth.user.name,authorEmail:e.props.auth.user.email,timeStamp:Ae()(new Date,"isoDateTime")};ge(a).then(function(t){console.log(t),200===t.status&&(e.loadComments(),e.setState({showComments:!0}))})},e.loadComments=Object(Y.a)(q.a.mark(function t(){return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._isMounted){t.next=3;break}return t.next=3,fe({pid:e.props.pid}).then(function(t){t.data&&e.setState({comments:t.data.map(function(e){return e})})});case 3:case"end":return t.stop()}},t)})),e.onShowComments=Object(Y.a)(q.a.mark(function t(){return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==e.state.showComments){t.next=6;break}return t.next=3,e.loadComments();case 3:e.setState({showComments:!0}),t.next=7;break;case 6:e.setState({showComments:!1});case 7:case"end":return t.stop()}},t)})),e.componentDidMount=Object(Y.a)(q.a.mark(function t(){return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._isMounted=!0,e._isMounted&&Z({email:e.props.authorEmail}).then(function(t){t.data.avatar?e.setState({authorAvatar:t.data.avatar}):e.setState({authorAvatar:""})});case 2:case"end":return t.stop()}},t)})),e.state={showFullCard:!0,authorAvatar:"",showComments:!1,comments:[],newCommentContent:"",shouldRedirect:!1},e.directToEditPost=e.directToEditPost.bind(Object(X.a)(e)),e.loadComments=e.loadComments.bind(Object(X.a)(e)),e.onShowComments=e.onShowComments.bind(Object(X.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"capitalizeTag",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"directToEditPost",value:function(){this.setState({shouldEdit:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=t.pid,n=t.title,o=t.content,s=t.timeStamp,i=t.tags;return this.state.shouldEdit&&(this.props.dispatch({type:"EDIT_POST",payload:{pid:a,title:n,content:o,timeStamp:s,tags:i}}),this.props.history.push({pathname:"/post/edit"})),r.a.createElement("div",{style:Te.wrapper},r.a.createElement(we.a,{style:Te.card,fluid:!0},r.a.createElement(we.a.Content,{style:Te.cardContent},r.a.createElement(ye.a,{padded:!0},r.a.createElement(ye.a.Row,{style:Fe([Te.field,Te.top])},r.a.createElement(ae,{userName:this.props.author,userAvatar:this.state.authorAvatar})),r.a.createElement(ye.a.Row,{columns:"2",id:"postview-icons-row",style:{marginTop:"-55px"}},r.a.createElement(ye.a.Column,{style:Te.column}),r.a.createElement(ye.a.Column,{style:Te.column},r.a.createElement("div",{style:Te.iconGroup},this.props.canManage?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{size:"large",name:"pencil",onClick:this.directToEditPost,style:Te.icon}),"\xa0",r.a.createElement(B.a,{size:"large",name:"close",onClick:this.onDeleteClicked,color:"red",style:Te.icon})):"","\xa0",r.a.createElement(B.a,{size:"large",name:this.state.showFullCard?"window maximize":"window maximize outline",onClick:this.toggleShowFullCard,style:Te.icon})))),r.a.createElement(ye.a.Row,{style:this.state.showFullCard?Fe([Te.field,Te.title]):Fe([Te.field,Te.titleTight])},this.props.title),this.state.showFullCard?r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a.Row,null,r.a.createElement(Ce.a,{style:Fe([Te.field,Te.content])},r.a.createElement(ve.a,{source:this.props.content}))),r.a.createElement(ye.a.Row,null,r.a.createElement(ee.a.Group,{size:"medium"},this.props.tags.map(function(t,a){return r.a.createElement(ee.a,{className:"postView-tag",key:"postView-tag-"+a,color:Ue[a%Ue.length]},e.capitalizeTag(t))}))),r.a.createElement(ke.a,{horizontal:!0,style:Te.divider},r.a.createElement(Se.a,{icon:!0,onClick:this.onShowComments,style:{background:"transparent"}},r.a.createElement(B.a,{name:"angle down",size:"large"}))),this.state.showComments&&this.state.comments.length?r.a.createElement(ye.a.Row,{style:Te.commentsRow},r.a.createElement(ze,{comments:this.state.comments})):"",r.a.createElement(Oe.a,{as:je.a,id:"newCommentContent",value:this.state.newCommentContent,onChange:this.onChange,placeholder:"Write your comment: ",rows:"2",icon:r.a.createElement(Se.a,{icon:!0,style:Te.commentSubmitButton},r.a.createElement(B.a,{name:"check",onClick:this.onAddComment,size:"large",color:"black"})),style:Te.commentInput})):r.a.createElement(r.a.Fragment,null)),r.a.createElement(xe.a,{open:this.state.deleteModalOpened,onClose:this.deleteModalClose},r.a.createElement(xe.a.Header,null,"Deleting your post"),r.a.createElement(xe.a.Content,{image:!0},r.a.createElement("p",null,"Are you sure you would like to have this post removed?")),r.a.createElement(xe.a.Actions,null,r.a.createElement(Se.a,{positive:!0,content:"Nope, I would keep it :)",color:"black",onClick:function(){return e.deleteModalClose(!1)}}),r.a.createElement(Se.a,{negative:!0,icon:"checkmark",labelPosition:"right",content:"Yes, delete it",onClick:function(){return e.deleteModalClose(!0)}}))))))}}]),t}(r.a.Component),_e=Object(h.b)(function(e){return{auth:e.auth}})(Object(p.e)(Le)),Ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.state={posts:[],doAnimate:!1,clickedIndex:-1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(q.a.mark(function e(){var t=this;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isMounted=!0,!this._isMounted){e.next=4;break}return e.next=4,pe().then(function(){var e=Object(Y.a)(q.a.mark(function e(a){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.data){e.next=3;break}return e.next=3,t.setState({posts:a.data.map(function(e){return e})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.posts;return r.a.createElement(se.a,null,r.a.createElement("div",{style:le.fadeIn},t.map(function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement("div",{style:e.state.doAnimate&&a===e.state.clickedIndex?le.postViewAnimated:{},key:"postBoard-postView-wrapper-"+a},r.a.createElement(_e,{className:"postBoard-postView",key:"postBoard-postView-"+a,canManage:!1,pid:t._id,title:t.title,author:t.author,authorEmail:t.authorEmail,content:t.content,tags:t.tags,timeStamp:t.timeStamp,viewCount:t.viewCount,likeCount:t.likeCount})),r.a.createElement("div",{style:le.postBoardSeparator}))})))}}]),t}(r.a.Component),We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.state={posts:[],doAnimate:!1,clickedIndex:-1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(q.a.mark(function e(){var t,a=this;return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,e.next=3,N.getState().auth.user.email;case 3:if(t=e.sent,!this._isMounted||!t){e.next=7;break}return e.next=7,he({userEmail:t}).then(function(){var e=Object(Y.a)(q.a.mark(function e(t){return q.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data){e.next=3;break}return e.next=3,a.setState({posts:t.data.map(function(e){return e})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.posts;return r.a.createElement(se.a,null,r.a.createElement("div",{style:le.fadeIn},t.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:e.state.doAnimate&&a===e.state.clickedIndex?le.postViewAnimated:{},key:"postBoard-postView-wrapper-"+a},r.a.createElement(_e,{className:"postBoard-postView",key:"postBoard-postView-"+a,canManage:!0,pid:t._id,title:t.title,author:t.author,authorEmail:t.authorEmail,content:t.content,tags:t.tags,timeStamp:t.timeStamp,viewCount:t.viewCount,likeCount:t.likeCount})),r.a.createElement("div",{style:le.postBoardSeparator}))})))}}]),t}(r.a.Component),Be=a(739),Ge=(a(283),{wrapper:{width:"60%",minWidth:"500px",margin:"0 auto"},card:{background:"rgba(240, 240, 240, 96%)"},cardContent:{width:"97.5%",margin:"0 auto"},field:{marginTop:"15px",width:"100%",background:"rgba(240, 240, 240)",border:"1px solid #ddd",boxShadow:"none"},title:{fontFamily:"Cairo",fontSize:"1.5em",fontWeight:"600",background:"rgba(236, 236, 236, 1)"},content:{fontSize:"1em",minHeight:"236px",background:"rgba(236, 236, 236, 1)"},tags:{background:"rgba(236, 236, 236, 1)"},tagInput:{},message:{},button:{},iconGroup:{background:"transparent",padding:"none",float:"right"},icon:{margin:"0"}}),Ve=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t,a){e.setState(Object(be.a)({},a.id,a.value))},e.onSubmit=function(){var t=Object(Y.a)(q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={title:e.state.title,content:e.state.content,author:e.state.author,authorEmail:e.state.authorEmail,timeStamp:Ae()(new Date,"isoDateTime"),tags:e.state.tags,viewCount:0,likeCount:0},ue(n).then(function(t){200===t.status&&e.setState({success:!0})});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={title:"",content:"",author:"",authorEmail:"",timeStamp:"",tags:[],currentTag:"",success:!1},e.onKeyUp=e.onKeyUp.bind(Object(X.a)(e)),e.onKeyDown=e.onKeyDown.bind(Object(X.a)(e)),e.appendTag=e.appendTag.bind(Object(X.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onKeyUp",value:function(e){var t=e.keyCode;32!==t&&188!==t||this.appendTag()}},{key:"onKeyDown",value:function(e){8!==e.keyCode||this.state.currentTag||this.editTag()}},{key:"appendTag",value:function(){var e=this.state,t=e.tags,a=e.currentTag.trim();(a=a.replace(/,/g,""))&&this.setState({tags:[].concat(Object(Me.a)(t),[a]),currentTag:""})}},{key:"editTag",value:function(){var e=this.state.tags.pop();this.setState({currentTag:e})}},{key:"componentDidMount",value:function(){N.getState().auth.isAuthenticated&&this.setState({author:N.getState().auth.user.name,authorEmail:N.getState().auth.user.email})}},{key:"render",value:function(){return r.a.createElement("div",{style:Ge.wrapper},r.a.createElement(we.a,{style:Ge.card,fluid:!0},r.a.createElement(we.a.Content,{style:Ge.cardContent},r.a.createElement(ye.a,{padded:!0},r.a.createElement(ye.a.Row,null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Title"),r.a.createElement(Ce.a,{as:Oe.a,id:"title",value:this.state.title,onChange:this.onChange,placeholder:"",rows:"1",style:Fe([Ge.field,Ge.title])})),r.a.createElement(ye.a.Row,null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Content"),r.a.createElement(Ce.a,{as:Oe.a,id:"content",value:this.state.content,onChange:this.onChange,placeholder:"Write whatever you want ;)",rows:"12",style:Fe([Ge.field,Ge.content])}),r.a.createElement(Ce.a,{style:Fe([Ge.field,Ge.content])},r.a.createElement(ve.a,{source:this.state.content}))),r.a.createElement(ye.a.Row,null,r.a.createElement("div",null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Tags")),r.a.createElement(Ce.a,{id:"tags",style:Fe([Ge.field,Ge.tags])},r.a.createElement(ee.a.Group,{size:"large",style:Ge.tagList},this.state.tags.map(function(e,t){return r.a.createElement(ee.a,{color:Ue[t%Ue.length]},Pe(e),r.a.createElement(B.a,{name:"delete"}))})),r.a.createElement(je.a,{id:"currentTag",placeholder:"Add tags here",value:this.state.currentTag,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,style:Ge.tagInput}))),this.state.success?r.a.createElement(ye.a.Row,null,r.a.createElement(Be.a,{success:!0,header:"Success",content:"Posted!",style:Ge.field})):"",r.a.createElement(ye.a.Row,null,r.a.createElement(Se.a,{disabled:!1,onClick:this.onSubmit,animated:"vertical",size:"big",primary:!0},r.a.createElement(Se.a.Content,{visible:!0},"Submit"),r.a.createElement(Se.a.Content,{hidden:!0},r.a.createElement(V.a,{icon:["fas","check"],size:"1x"}))))))))}}]),t}(r.a.Component),He=Object(ie.a)(Ve),qe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t,a){e.setState(Object(be.a)({},a.id,a.value))},e.onSubmit=function(){var t=Object(Y.a)(q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={pid:e.state.pid,title:e.state.title,content:e.state.content,timeStamp:Ae()(new Date,"isoDateTime"),tags:e.state.tags},de(n).then(function(t){200===t.status&&e.setState({success:!0})});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={pid:"",title:"",content:"",author:"",authorEmail:"",timeStamp:"",tags:[],currentTag:"",success:!1},e.onKeyUp=e.onKeyUp.bind(Object(X.a)(e)),e.onKeyDown=e.onKeyDown.bind(Object(X.a)(e)),e.appendTag=e.appendTag.bind(Object(X.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onKeyUp",value:function(e){var t=e.keyCode;32!==t&&188!==t||this.appendTag()}},{key:"onKeyDown",value:function(e){8!==e.keyCode||this.state.currentTag||this.editTag()}},{key:"appendTag",value:function(){var e=this.state,t=e.tags,a=e.currentTag.trim();(a=a.replace(/,/g,""))&&this.setState({tags:[].concat(Object(Me.a)(t),[a]),currentTag:""})}},{key:"editTag",value:function(){var e=this.state.tags.pop();this.setState({currentTag:e})}},{key:"componentDidMount",value:function(){this.setState({pid:this.props.pid,title:this.props.title,content:this.props.content,timeStamp:this.props.timeStamp,tags:this.props.tags}),N.getState().auth.isAuthenticated&&this.setState({author:N.getState().auth.user.name,authorEmail:N.getState().auth.user.email})}},{key:"render",value:function(){return r.a.createElement("div",{style:Ge.wrapper},r.a.createElement(we.a,{style:Ge.card,fluid:!0},r.a.createElement(we.a.Content,{style:Ge.cardContent},r.a.createElement(ye.a,{padded:!0},r.a.createElement(ye.a.Row,null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Title"),r.a.createElement(Ce.a,{as:Oe.a,id:"title",value:this.state.title,onChange:this.onChange,placeholder:"",rows:"1",style:Fe([Ge.field,Ge.title])})),r.a.createElement(ye.a.Row,null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Content"),r.a.createElement(Ce.a,{as:Oe.a,id:"content",value:this.state.content,onChange:this.onChange,placeholder:"Write whatever you want ;)",rows:"12",style:Fe([Ge.field,Ge.content])}),r.a.createElement(Ce.a,{style:Fe([Ge.field,Ge.content])},r.a.createElement(ve.a,{source:this.state.content}))),r.a.createElement(ye.a.Row,null,r.a.createElement("div",null,r.a.createElement(ee.a,{color:"grey",size:"large"},"Tags")),r.a.createElement(Ce.a,{id:"tags",style:Fe([Ge.field,Ge.tags])},r.a.createElement(ee.a.Group,{size:"large",className:"addPost-tagList"},this.state.tags.map(function(e,t){return r.a.createElement(ee.a,{color:Ue[t%Ue.length]},Pe(e),r.a.createElement(B.a,{name:"delete"}))})),r.a.createElement(je.a,{id:"currentTag",placeholder:"Add tags here",value:this.state.currentTag,onChange:this.onChange,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown}))),this.state.success?r.a.createElement(ye.a.Row,null,r.a.createElement(Be.a,{success:!0,header:"Success",content:"Posted!",style:Ge.field})):"",r.a.createElement(ye.a.Row,null,r.a.createElement(Se.a,{disabled:!1,onClick:this.onSubmit,animated:"vertical",size:"big",primary:!0,style:Ge.button},r.a.createElement(Se.a.Content,{visible:!0},"Submit"),r.a.createElement(Se.a.Content,{hidden:!0},r.a.createElement(V.a,{icon:["fas","check"],size:"1x"}))))))))}}]),t}(r.a.Component),Ye=Object(h.b)(function(e){return{pid:e.editPost.pid,title:e.editPost.title,content:e.editPost.content,timeStamp:e.editPost.timeStamp,tags:e.editPost.tags}})(qe),Je=a(744),Qe=a(734),Ze=a(346),Xe=a(733),$e=(a(711),a(156)),et=a.n($e);a(721);et.a.initializeApp({apiKey:"AIzaSyAUJL-HyOMpvNNQWvFwZcG6Rg3HMFPVsbM",authDomain:"fangnx-rview.firebaseapp.com",databaseURL:"https://fangnx-rview.firebaseio.com",projectId:"fangnx-rview",storageBucket:"fangnx-rview.appspot.com",messagingSenderId:"798177073729",appId:"1:798177073729:web:8f8e426a0bd83b2a"});var tt=et.a.storage(),at=[{key:"m",text:"Male",value:"m"},{key:"f",text:"Female",value:"f"},{key:"o",text:"Other",value:"o"}],nt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t,a){e.setState(Object(be.a)({},a.id,a.value))},e.onCheck=function(){e.setState({checked:!e.state.checked})},e.onUploadAvatar=function(t){var a="firebase-image-"+Date.now();tt.ref("images/".concat(a)).put(t.target.files[0]).on("state_changed",function(e){},function(e){return alert(e)},function(){tt.ref("images").child(a).getDownloadURL().then(function(t){e.setState({avatar:t});var n={name:a,imageData:t};F.a.post("http://localhost:5000/api/images/uploadavatar",n).then(function(e){e.data.success&&alert("Avatar image uploaded!")}).catch(function(e){return alert(e)})})})},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,gender:e.state.gender,password:e.state.password,passwordRe:e.state.passwordRe,avatar:e.state.avatar};e.props.registerUser(a)},e.state={name:"",email:"",gender:"",password:"",passwordRe:"",avatar:"",checked:!1,errors:{},success:!1,visible:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"componentWillReceiveProps",value:function(e){e.errors&&Object.keys(e.errors).length>0&&!e.errors.registerSuccess?this.setState({errors:e.errors,success:!1}):e.errors.registerSuccess&&this.setState({errors:{},success:!0})}},{key:"render",value:function(){var e=this.state.errors,t=this.state.success,a=this.state.visible;return r.a.createElement("div",{className:"registration-wrapper"},r.a.createElement(Je.a,{visible:a,duration:400,animation:"scale"},r.a.createElement(we.a,{className:"registration-card",fluid:!0},r.a.createElement(we.a.Header,{className:"registration-card-header"},r.a.createElement("span",null,r.a.createElement("h1",null,"Register"))),r.a.createElement(we.a.Content,{className:"registration-card-content"},r.a.createElement(Qe.a,{success:t,className:"registration-form"},r.a.createElement(Qe.a.Field,{error:!!e.name,required:!0},r.a.createElement("label",{for:"name",className:"registration-field-text"},"Name"),r.a.createElement(je.a,{id:"name",value:this.state.name,onChange:this.onChange,placeholder:"Name"}),r.a.createElement("span",{className:"registration-field-msg"},e.name)),r.a.createElement(Qe.a.Field,{error:!!e.email,required:!0},r.a.createElement("label",{for:"email",className:"registration-field-text"},"Email"),r.a.createElement(je.a,{id:"email",value:this.state.email,onChange:this.onChange,placeholder:"Email"}),r.a.createElement("span",{className:"registration-field-msg"},e.email)),r.a.createElement(Qe.a.Field,{error:!!e.password,required:!0},r.a.createElement("label",{for:"password",className:"registration-field-text"},"Password"),r.a.createElement(je.a,{id:"password",value:this.state.password,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("span",{className:"registration-field-msg"},e.password)),r.a.createElement(Qe.a.Field,{error:!!e.passwordRe,required:!0},r.a.createElement("label",{for:"passwordRe",className:"registration-field-text"},"Confirm Password"),r.a.createElement(je.a,{id:"passwordRe",value:this.state.passwordRe,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),r.a.createElement("span",{className:"registration-field-msg"},e.passwordRe)),r.a.createElement(Qe.a.Field,{error:!!e.gender,required:!0},r.a.createElement("label",{for:"gender",className:"registration-field-text"},"Gender"),r.a.createElement(G.a,{selection:!0,search:!0,id:"gender",value:this.state.gender,onChange:this.onChange,options:at,placeholder:"Gender"}),r.a.createElement("span",{className:"registration-field-msg"},e.gender)),r.a.createElement(Qe.a.Field,null,r.a.createElement("label",{for:"avatar",className:"registration-field-text"},"Avatar"),r.a.createElement(je.a,{id:"avatar",type:"file",onChange:this.onUploadAvatar}),r.a.createElement(Ze.a,{src:this.state.avatar})),r.a.createElement(Qe.a.Field,{control:Xe.a,checked:this.state.checked,onClick:this.onCheck,label:"I agree to the Terms and Conditions"}),r.a.createElement(Be.a,{success:!0,header:"Success",content:"You have registered successfully~"}),r.a.createElement(Qe.a.Field,{as:Se.a,className:"registration-button",disabled:!this.state.checked,onClick:this.onSubmit,animated:"vertical",size:"large",primary:!0},r.a.createElement(Se.a.Content,{visible:!0},"Submit"),r.a.createElement(Se.a.Content,{hidden:!0},r.a.createElement(V.a,{icon:["fas","check"],size:"1x"}))))))))}}]),t}(r.a.Component),rt=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},function(e){return{registerUser:function(t){return e(function(e){return function(t){F.a.post("http://localhost:5000/api/users/register",e).then(function(e){t({type:"AUTH_ERRORS",payload:{registerSuccess:1}})}).catch(function(e){t({type:"AUTH_ERRORS",payload:e.response.data})})}}(t))}}})(nt),ot=(a(719),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t,a){e.setState(Object(be.a)({},a.id,a.value))},e.onSubmit=function(){var t=Object(Y.a)(q.a.mark(function t(a){var n;return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n={email:e.state.email,password:e.state.password},e.props.loginUser(n);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.state={email:"",password:"",errors:{},success:!1,visible:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({visible:!0})}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&Object.keys(e.errors).length>0&&!e.errors.loginSuccess?this.setState({errors:e.errors,success:!1}):e.errors.loginSuccess&&this.setState({errors:{},success:!0})}},{key:"render",value:function(){var e=this.state.errors,t=this.state.success,a=this.state.visible;return r.a.createElement("div",{className:"login-wrapper"},r.a.createElement(Je.a,{visible:a,duration:400,animation:"scale"},r.a.createElement(we.a,{className:"login-card",fluid:!0},r.a.createElement(we.a.Header,{className:"login-card-header"},r.a.createElement("span",null,r.a.createElement("h1",null,"Login"))),r.a.createElement(we.a.Content,{className:"login-card-content"},r.a.createElement(Qe.a,{success:t,className:"login-form"},r.a.createElement(Qe.a.Field,{error:!!e.email,required:!0},r.a.createElement("label",{for:"email",className:"login-field-text"},"Email"),r.a.createElement(je.a,{id:"email",value:this.state.email,onChange:this.onChange,placeholder:"Email"}),r.a.createElement("span",{className:"login-field-msg"},e.email)),r.a.createElement(Qe.a.Field,{error:!!e.password,required:!0},r.a.createElement("label",{for:"password",className:"login-field-text"},"Password"),r.a.createElement(je.a,{id:"password",value:this.state.password,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("span",{className:"login-field-msg"},e.password)),r.a.createElement(Be.a,{success:!0,header:"Success",content:"You have registered successfully~"}),r.a.createElement(Qe.a.Field,{as:Se.a,className:"login-button",onClick:this.onSubmit,animated:"vertical",size:"large",primary:!0},r.a.createElement(Se.a.Content,{visible:!0},"Submit"),r.a.createElement(Se.a.Content,{hidden:!0},r.a.createElement(V.a,{icon:["fas","check"],size:"1x"}))))))))}}]),t}(r.a.Component)),st=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},function(e){return{loginUser:function(t){return e(function(e){return function(t){F.a.post("http://localhost:5000/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),P(a);var n=z()(a);t(J(n)),t({type:"AUTH_ERRORS",payload:{loginSuccess:1}})}).catch(function(e){t({type:"AUTH_ERRORS",payload:e.response.data})})}}(t))}}})(ot);if(localStorage.jwtToken){var it=localStorage.jwtToken;P(it);var ct=z()(it);N.dispatch(J(ct));var lt=Date.now()/1e3;ct.exp<lt&&(N.dispatch(Q()),window.location.href="./login")}console.log(N.getState());var ut=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"app-background"}),r.a.createElement(h.a,{store:N},r.a.createElement(g.a,{persistor:I},r.a.createElement("div",{className:"app-fixed"},r.a.createElement(oe,null)),r.a.createElement(d.a,null,r.a.createElement("div",{className:"app-content"},r.a.createElement(p.a,{path:"/",exact:!0,component:Ke}),r.a.createElement(p.a,{path:"/registration",component:rt}),r.a.createElement(p.a,{path:"/login",component:st}),r.a.createElement(p.a,{path:"/post/add",component:He}),r.a.createElement(p.a,{path:"/post/edit",component:Ye}),r.a.createElement(p.a,{path:"/myposts",component:We}))))))}}]),t}(r.a.Component);U.b.add(L.a,_.a,K.a,K.c,K.b);var mt=ut;s.a.render(r.a.createElement(mt,null),document.getElementById("root"))}},[[355,1,2]]]);
//# sourceMappingURL=main.dd984819.chunk.js.map